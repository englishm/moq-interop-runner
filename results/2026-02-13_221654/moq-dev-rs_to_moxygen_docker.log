make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
rm -rf mlog/
mkdir -p mlog/relay mlog/client
Running interop tests...
  Relay:  moxygen-interop:latest
  Client: ghcr.io/englishm/moq-interop-runner-moq-dev-rs-client:latest
RELAY_IMAGE=moxygen-interop:latest CLIENT_IMAGE=ghcr.io/englishm/moq-interop-runner-moq-dev-rs-client:latest \
	docker compose -f docker-compose.test.yml up --abort-on-container-exit
time="2026-02-13T22:22:48Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:22:48Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:22:48Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:22:48Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:22:48Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
 Container main-relay-1  Recreate
 Container main-relay-1  Recreated
Attaching to relay-1, test-client-1
relay-1  | V0213 22:22:49.145830     7 MoQServer.cpp:95] MoQServer: Registering ALPN handlers: moqt-16, moqt-15, moq-00
test-client-1  | TAP version 14
test-client-1  | # moq-dev-rs-client v0.1.0
test-client-1  | # Relay: https://relay:4443
test-client-1  | 1..6
relay-1        | V0213 22:22:54.826628     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0213 22:22:54.826842     8 MoQSession.cpp:2176] start sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827036     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827086     8 MoQSession.cpp:2548] controlReadLoop sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827106     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7fd864051c20
relay-1        | W0213 22:22:54.827234     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0213 22:22:54.827246     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0213 22:22:54.827256     8 MoQSession.cpp:2411] onClientSetup sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827261     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827270     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0213 22:22:54.827280     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
test-client-1  | ok 1 - setup-only
test-client-1  |   ---
test-client-1  |   duration_ms: 49
test-client-1  |   ...
relay-1        | E0213 22:22:54.827688     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0213 22:22:54.827703     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827709     8 MoQSession.cpp:2244] close sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827736     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7fd864051c20
relay-1        | V0213 22:22:54.827753     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7fd864051c20
relay-1        | E20260213 22:22:54.827781     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=f2b2107fc00c03f7, server CID=4000000b60867e7d, downstream=[::ffff:172.18.0.3]:59537, [::]:4443=local, drain=none
relay-1        | E0213 22:22:54.828101     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7fd864051c20
relay-1        | V0213 22:22:54.828118     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7fd864051c20
relay-1        | V0213 22:22:54.828233     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7fd864051c20
relay-1        | V0213 22:22:54.828247     8 MoQSession.cpp:2124] ~MoQSession sess=0x7fd864051c20
relay-1        | V0213 22:22:54.829226     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0213 22:22:54.829358     8 MoQSession.cpp:2176] start sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.829592     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.829609     8 MoQSession.cpp:2548] controlReadLoop sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.829618     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7fd864067fa0
relay-1        | W0213 22:22:54.829701     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0213 22:22:54.829738     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0213 22:22:54.829748     8 MoQSession.cpp:2411] onClientSetup sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.829752     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.829757     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0213 22:22:54.829763     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0213 22:22:54.830100     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7fd864067fa0
relay-1        | V0213 22:22:54.830130     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0213 22:22:54.830141     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7fd864067fa0
test-client-1  | ok 2 - announce-only
test-client-1  |   ---
test-client-1  |   duration_ms: 503
test-client-1  |   ...
relay-1        | E0213 22:22:55.331638     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0213 22:22:55.331668     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.331673     8 MoQSession.cpp:2244] close sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.331682     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0213 22:22:55.331690     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
relay-1        | V0213 22:22:55.331697     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.331711     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7fd864067fa0
relay-1        | E20260213 22:22:55.331758     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=eb4954f2135cb261, server CID=4000001601cca647, downstream=[::ffff:172.18.0.3]:59537, [::]:4443=local, drain=none
relay-1        | E0213 22:22:55.331981     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.332035     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.332094     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.333174     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0213 22:22:55.333290     8 MoQSession.cpp:2176] start sess=0x7fd864064a50
relay-1        | V0213 22:22:55.333470     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7fd864064a50
relay-1        | V0213 22:22:55.333493     8 MoQSession.cpp:2548] controlReadLoop sess=0x7fd864064a50
relay-1        | V0213 22:22:55.333500     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7fd864064a50
relay-1        | W0213 22:22:55.333631     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0213 22:22:55.333645     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0213 22:22:55.333656     8 MoQSession.cpp:2411] onClientSetup sess=0x7fd864064a50
relay-1        | V0213 22:22:55.333660     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7fd864064a50
relay-1        | V0213 22:22:55.333665     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0213 22:22:55.333675     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0213 22:22:55.333995     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7fd864064a50
relay-1        | V0213 22:22:55.334013     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0213 22:22:55.334020     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7fd864064a50
relay-1        | V0213 22:22:55.342298     8 MoQSession.cpp:2124] ~MoQSession sess=0x7fd864067fa0
relay-1        | V0213 22:22:55.834480     8 MoQRelaySession.cpp:811] onPublishNamespaceDone ns=moq-test/interop sess=0x7fd864064a50
relay-1        | V0213 22:22:55.834506     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0213 22:22:55.834512     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
test-client-1  | ok 3 - publish-namespace-done
test-client-1  |   ---
test-client-1  |   duration_ms: 704
test-client-1  |   ...
test-client-1  | ok 4 - subscribe-error # SKIP moq-lite API requires announcement before subscribe
relay-1        | E0213 22:22:56.035727     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0213 22:22:56.035759     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7fd864064a50
relay-1        | V0213 22:22:56.035765     8 MoQSession.cpp:2244] close sess=0x7fd864064a50
relay-1        | V0213 22:22:56.035776     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7fd864064a50
relay-1        | V0213 22:22:56.035791     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7fd864064a50
relay-1        | E20260213 22:22:56.035838     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=ffdf55e96b8d9662, server CID=4000001b0052ac94, downstream=[::ffff:172.18.0.3]:59537, [::]:4443=local, drain=none
relay-1        | E0213 22:22:56.036060     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7fd864064a50
relay-1        | V0213 22:22:56.036075     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7fd864064a50
relay-1        | V0213 22:22:56.036115     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7fd864064a50
relay-1        | V0213 22:22:56.036127     8 MoQSession.cpp:2124] ~MoQSession sess=0x7fd864064a50
relay-1        | V0213 22:22:56.037390     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0213 22:22:56.037517     8 MoQSession.cpp:2176] start sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.037738     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.037752     8 MoQSession.cpp:2548] controlReadLoop sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.037758     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7fd86405ecb0
relay-1        | W0213 22:22:56.037879     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0213 22:22:56.037891     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0213 22:22:56.037902     8 MoQSession.cpp:2411] onClientSetup sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.037906     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.037912     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0213 22:22:56.037924     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0213 22:22:56.038298     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.038322     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0213 22:22:56.038332     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7fd86405ecb0
relay-1        | V0213 22:22:56.341300     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0213 22:22:56.341451     8 MoQSession.cpp:2176] start sess=0x7fd86406c7a0
relay-1        | V0213 22:22:56.341684     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7fd86406c7a0
relay-1        | V0213 22:22:56.341713     8 MoQSession.cpp:2548] controlReadLoop sess=0x7fd86406c7a0
relay-1        | V0213 22:22:56.341724     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7fd86406c7a0
relay-1        | W0213 22:22:56.341820     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0213 22:22:56.341831     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0213 22:22:56.341842     8 MoQSession.cpp:2411] onClientSetup sess=0x7fd86406c7a0
relay-1        | V0213 22:22:56.341846     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7fd86406c7a0
relay-1        | V0213 22:22:56.341851     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0213 22:22:56.341860     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
test-client-1  | not ok 5 - announce-subscribe
test-client-1  |   ---
test-client-1  |   duration_ms: 1808
test-client-1  |   message: "timeout waiting for announcement"
test-client-1  |   ...
test-client-1  | ok 6 - subscribe-before-announce # SKIP moq-lite API requires announcement before subscribe
relay-1        | E0213 22:22:57.844247     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=dropped
relay-1        | V0213 22:22:57.844277     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844283     8 MoQSession.cpp:2244] close sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844293     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844306     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7fd86406c7a0
relay-1        | E20260213 22:22:57.844348     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=dropped proto=h3, UA=, client CID=4ae6a8a7518f947d, server CID=4000001b5609ee48, downstream=[::ffff:172.18.0.3]:59537, [::]:4443=local, drain=none
relay-1        | E0213 22:22:57.844510     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844521     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844559     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7fd86406c7a0
relay-1        | V0213 22:22:57.844570     8 MoQSession.cpp:2124] ~MoQSession sess=0x7fd86406c7a0
[Ktest-client-1 exited with code 1
[31m[1mAborting on container exit...[0m
 Container main-test-client-1  Stopping
 Container main-test-client-1  Stopped
 Container main-relay-1  Stopping
relay-1        | E0213 22:23:06.046171     8 MoQServer.h:129] proxygen::HTTPException: Got error=LocalError: Idle timeout, Idle timeout: 10 seconds timeout
relay-1        | V0213 22:23:06.046205     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.046210     8 MoQSession.cpp:2244] close sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.046218     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0213 22:23:06.046225     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
relay-1        | V0213 22:23:06.046231     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.046243     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7fd86405ecb0
relay-1        | E0213 22:23:06.046295     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: quic error with error=4294967295 id=4 sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.046315     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.046376     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7fd86405ecb0
relay-1        | V0213 22:23:06.056575     8 MoQSession.cpp:2124] ~MoQSession sess=0x7fd86405ecb0
 Container main-relay-1  Stopped
[Krelay-1 exited with code 137

make[1]: *** [Makefile:65: test] Error 1
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
