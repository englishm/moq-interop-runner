make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
rm -rf mlog/
mkdir -p mlog/relay mlog/client
Running interop tests...
  Relay:  ghcr.io/englishm/moq-interop-runner-moq-relay-ietf-draft-16:latest
  Client: ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64
RELAY_IMAGE=ghcr.io/englishm/moq-interop-runner-moq-relay-ietf-draft-16:latest CLIENT_IMAGE=ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64 \
	docker compose -f docker-compose.test.yml up --abort-on-container-exit
time="2026-02-13T22:20:34Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:20:34Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:20:34Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:20:34Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
time="2026-02-13T22:20:34Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
 Container main-relay-1  Recreate
 Container main-relay-1  Recreated
 Container main-test-client-1  Recreate
 Container main-test-client-1  Recreated
Attaching to relay-1, test-client-1
relay-1  | Starting moq-rs relay on port 4443
relay-1  |   Cert: /certs/cert.pem
relay-1  |   Key:  /certs/priv.key
relay-1  |   Mlog: /mlog
test-client-1  | TAP version 14
test-client-1  | # moxygen interop test client
test-client-1  | # Relay: https://relay:4443
test-client-1  | # Transport: WebTransport
test-client-1  | 1..6
test-client-1  | W0213 22:20:40.556748     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0213 22:20:40.557188     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.557204     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.557209     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-13T22:20:40.557205Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
relay-1        | [2m2026-02-13T22:20:40.557487Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.557710     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=d8043b47d774d5f1, local=172.18.0.3:52185, 172.18.0.2:4443=upstream, drain=done
test-client-1  | not ok 1 - setup-only
test-client-1  |   ---
test-client-1  |   duration_ms: 17
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | W0213 22:20:40.565366     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0213 22:20:40.565731     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.565746     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.565751     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-13T22:20:40.565751Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
relay-1        | [2m2026-02-13T22:20:40.565905Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.566015     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=c8662fe9e8fa4151, local=172.18.0.3:54117, 172.18.0.2:4443=upstream, drain=done
test-client-1  | not ok 2 - announce-only
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | W0213 22:20:40.573158     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-13T22:20:40.573525Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0213 22:20:40.573508     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.573523     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.573527     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
test-client-1  | not ok 3 - subscribe-error
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
relay-1        | [2m2026-02-13T22:20:40.573763Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.574349     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=5a366fa0e7f9c4cb, local=172.18.0.3:33611, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0213 22:20:40.580747     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0213 22:20:40.581052     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.581062     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.581065     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-13T22:20:40.581067Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | not ok 4 - announce-subscribe
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
relay-1        | [2m2026-02-13T22:20:40.581285Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.581947     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=3a23c944104326d0, local=172.18.0.3:38657, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0213 22:20:40.588314     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0213 22:20:40.588638     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.588648     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.588652     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-13T22:20:40.588652Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
relay-1        | [2m2026-02-13T22:20:40.588882Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.588964     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=9112ce2a7230989c, local=172.18.0.3:45487, 172.18.0.2:4443=upstream, drain=done
test-client-1  | not ok 5 - publish-namespace-done
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | W0213 22:20:40.595987     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-13T22:20:40.596308Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0213 22:20:40.596299     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0213 22:20:40.596314     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0213 22:20:40.596319     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
test-client-1  | not ok 6 - subscribe-before-announce
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
relay-1        | [2m2026-02-13T22:20:40.596601Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260213 22:20:40.596747     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=3dcd77702be41cc2, local=172.18.0.3:37513, 172.18.0.2:4443=upstream, drain=done
[Ktest-client-1 exited with code 1
[31m[1mAborting on container exit...[0m
 Container main-test-client-1  Stopping
 Container main-test-client-1  Stopped
 Container main-relay-1  Stopping
 Container main-relay-1  Stopped
[Krelay-1 exited with code 137

make[1]: *** [Makefile:65: test] Error 1
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
