make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
rm -rf mlog/
mkdir -p mlog/relay mlog/client
Running interop tests...
  Relay:  ghcr.io/englishm/moq-interop-runner-moq-relay-ietf-draft-16:latest
  Client: ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64
RELAY_IMAGE=ghcr.io/englishm/moq-interop-runner-moq-relay-ietf-draft-16:latest CLIENT_IMAGE=ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64 \
	docker compose -f docker-compose.test.yml up --abort-on-container-exit
time="2026-02-15T00:29:21Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:29:21Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:29:21Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:29:21Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:29:21Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
 Container main-relay-1  Recreate
 Container main-relay-1  Recreated
 Container main-test-client-1  Recreate
 Container main-test-client-1  Recreated
Attaching to relay-1, test-client-1
relay-1  | Starting moq-rs relay on port 4443
relay-1  |   Cert: /certs/cert.pem
relay-1  |   Key:  /certs/priv.key
relay-1  |   Mlog: /mlog
test-client-1  | TAP version 14
test-client-1  | # moxygen interop test client
test-client-1  | # Relay: https://relay:4443
test-client-1  | # Transport: WebTransport
test-client-1  | 1..6
test-client-1  | W0215 00:29:27.503608     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-15T00:29:27.504055Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0215 00:29:27.504049     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
relay-1        | [2m2026-02-15T00:29:27.504227Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E0215 00:29:27.504059     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.504063     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
test-client-1  | not ok 1 - setup-only
test-client-1  |   ---
test-client-1  |   duration_ms: 16
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | E20260215 00:29:27.504498     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=610afb32da5cd8b9, local=172.18.0.3:46407, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0215 00:29:27.511599     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0215 00:29:27.511972     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0215 00:29:27.511989     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.511994     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-15T00:29:27.511992Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
relay-1        | [2m2026-02-15T00:29:27.512171Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | not ok 2 - announce-only
test-client-1  |   ---
test-client-1  |   duration_ms: 6
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | E20260215 00:29:27.512290     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=6202e356592bb44f, local=172.18.0.3:59605, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0215 00:29:27.519028     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-15T00:29:27.519390Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0215 00:29:27.519376     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0215 00:29:27.519391     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.519396     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-15T00:29:27.519633Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260215 00:29:27.519755     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=34b7ec90df7c1281, local=172.18.0.3:56025, 172.18.0.2:4443=upstream, drain=done
test-client-1  | not ok 3 - subscribe-error
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | W0215 00:29:27.526073     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
test-client-1  | W0215 00:29:27.526418     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0215 00:29:27.526432     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.526437     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-15T00:29:27.526427Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
relay-1        | [2m2026-02-15T00:29:27.526645Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | not ok 4 - announce-subscribe
test-client-1  |   ---
test-client-1  |   duration_ms: 6
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | E20260215 00:29:27.526813     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=1694989a294cb121, local=172.18.0.3:42208, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0215 00:29:27.533131     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-15T00:29:27.533543Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0215 00:29:27.533525     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0215 00:29:27.533541     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.533546     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
test-client-1  | not ok 5 - publish-namespace-done
test-client-1  |   ---
test-client-1  |   duration_ms: 6
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
relay-1        | [2m2026-02-15T00:29:27.533768Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | E20260215 00:29:27.534322     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=01a891f87b66905d, local=172.18.0.3:46616, 172.18.0.2:4443=upstream, drain=done
test-client-1  | W0215 00:29:27.540061     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
relay-1        | [2m2026-02-15T00:29:27.540480Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m9
test-client-1  | W0215 00:29:27.540461     1 MoQFramer.cpp:784] Peer advertised unsupported version 1, supported versions are: 4278190094,4278190095,4278190096
test-client-1  | E0215 00:29:27.540471     1 MoQCodec.cpp:138] Conn error=3
test-client-1  | E0215 00:29:27.540474     1 MoQSession.cpp:4351] MoQCodec control stream parse error err=3
relay-1        | [2m2026-02-15T00:29:27.540681Z[0m [33m WARN[0m [2mweb_transport_quinn::session[0m[2m:[0m unknown capsule [3mtyp[0m[2m=[0m0 [3msize[0m[2m=[0m6
test-client-1  | not ok 6 - subscribe-before-announce
test-client-1  |   ---
test-client-1  |   duration_ms: 6
test-client-1  |   error: coroutine operation cancelled
test-client-1  |   ...
test-client-1  | E20260215 00:29:27.540944     1 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Client closed by peer reason=stream closed proto=h3, client CID=, server CID=4d9ec1ce2bc6a177, local=172.18.0.3:38231, 172.18.0.2:4443=upstream, drain=done
[Ktest-client-1 exited with code 1
[31m[1mAborting on container exit...[0m
 Container main-test-client-1  Stopping
 Container main-test-client-1  Stopped
 Container main-relay-1  Stopping
 Container main-relay-1  Stopped
[Krelay-1 exited with code 137

make[1]: *** [Makefile:65: test] Error 1
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
