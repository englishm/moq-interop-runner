make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
rm -rf mlog/
mkdir -p mlog/relay mlog/client
Running interop tests...
  Relay:  moxygen-interop:latest
  Client: ghcr.io/englishm/moq-interop-runner-moq-dev-rs-client:latest
RELAY_IMAGE=moxygen-interop:latest CLIENT_IMAGE=ghcr.io/englishm/moq-interop-runner-moq-dev-rs-client:latest \
	docker compose -f docker-compose.test.yml up --abort-on-container-exit
time="2026-02-15T00:31:35Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:31:35Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:31:35Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:31:35Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
time="2026-02-15T00:31:35Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
 Container main-relay-1  Recreate
 Container main-relay-1  Recreated
Attaching to relay-1, test-client-1
relay-1  | V0215 00:31:35.792330     7 MoQServer.cpp:95] MoQServer: Registering ALPN handlers: moqt-16, moqt-15, moq-00
test-client-1  | TAP version 14
test-client-1  | # moq-dev-rs-client v0.1.0
test-client-1  | # Relay: https://relay:4443
test-client-1  | 1..6
relay-1        | V0215 00:31:41.463753     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0215 00:31:41.463968     8 MoQSession.cpp:2176] start sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.464271     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.464299     8 MoQSession.cpp:2548] controlReadLoop sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.464314     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7f60c4051c00
relay-1        | W0215 00:31:41.464489     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0215 00:31:41.464507     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0215 00:31:41.464517     8 MoQSession.cpp:2411] onClientSetup sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.464522     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.464531     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0215 00:31:41.464540     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
test-client-1  | ok 1 - setup-only
test-client-1  |   ---
test-client-1  |   duration_ms: 46
test-client-1  |   ...
relay-1        | E0215 00:31:41.465001     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0215 00:31:41.465059     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.465089     8 MoQSession.cpp:2244] close sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.465126     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.465150     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7f60c4051c00
relay-1        | E20260215 00:31:41.465189     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=1a4f0d8d0d894848, server CID=40000017c36f5d67, downstream=[::ffff:172.18.0.3]:48386, [::]:4443=local, drain=none
relay-1        | E0215 00:31:41.465896     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.465914     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.466027     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.466068     8 MoQSession.cpp:2124] ~MoQSession sess=0x7f60c4051c00
relay-1        | V0215 00:31:41.466756     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0215 00:31:41.466857     8 MoQSession.cpp:2176] start sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467073     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467101     8 MoQSession.cpp:2548] controlReadLoop sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467106     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7f60c400a5a0
relay-1        | W0215 00:31:41.467189     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0215 00:31:41.467202     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0215 00:31:41.467209     8 MoQSession.cpp:2411] onClientSetup sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467214     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467218     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0215 00:31:41.467225     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0215 00:31:41.467576     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.467603     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0215 00:31:41.467614     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7f60c400a5a0
test-client-1  | ok 2 - announce-only
test-client-1  |   ---
test-client-1  |   duration_ms: 503
test-client-1  |   ...
relay-1        | E0215 00:31:41.968948     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0215 00:31:41.968975     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.968982     8 MoQSession.cpp:2244] close sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.968993     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0215 00:31:41.969003     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
relay-1        | V0215 00:31:41.969011     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.969025     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7f60c400a5a0
relay-1        | E20260215 00:31:41.969066     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=9176c3755f3f9d32, server CID=400000072495edc0, downstream=[::ffff:172.18.0.3]:48386, [::]:4443=local, drain=none
relay-1        | E0215 00:31:41.969214     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.969226     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.969263     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7f60c400a5a0
relay-1        | V0215 00:31:41.970465     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0215 00:31:41.970620     8 MoQSession.cpp:2176] start sess=0x7f60c4067870
relay-1        | V0215 00:31:41.970848     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7f60c4067870
relay-1        | V0215 00:31:41.970872     8 MoQSession.cpp:2548] controlReadLoop sess=0x7f60c4067870
relay-1        | V0215 00:31:41.970880     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7f60c4067870
relay-1        | W0215 00:31:41.970965     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0215 00:31:41.970982     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0215 00:31:41.970993     8 MoQSession.cpp:2411] onClientSetup sess=0x7f60c4067870
relay-1        | V0215 00:31:41.970998     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7f60c4067870
relay-1        | V0215 00:31:41.971002     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0215 00:31:41.971011     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0215 00:31:41.971323     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7f60c4067870
relay-1        | V0215 00:31:41.971357     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0215 00:31:41.971367     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7f60c4067870
relay-1        | V0215 00:31:41.979654     8 MoQSession.cpp:2124] ~MoQSession sess=0x7f60c400a5a0
relay-1        | V0215 00:31:42.472839     8 MoQRelaySession.cpp:811] onPublishNamespaceDone ns=moq-test/interop sess=0x7f60c4067870
relay-1        | V0215 00:31:42.472870     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0215 00:31:42.472880     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
test-client-1  | ok 3 - publish-namespace-done
test-client-1  |   ---
test-client-1  |   duration_ms: 705
test-client-1  |   ...
test-client-1  | ok 4 - subscribe-error # SKIP moq-lite API requires announcement before subscribe
relay-1        | E0215 00:31:42.673810     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=cancelled
relay-1        | V0215 00:31:42.673828     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7f60c4067870
relay-1        | V0215 00:31:42.673834     8 MoQSession.cpp:2244] close sess=0x7f60c4067870
relay-1        | V0215 00:31:42.673843     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7f60c4067870
relay-1        | V0215 00:31:42.673857     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7f60c4067870
relay-1        | E20260215 00:31:42.673892     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=cancelled proto=h3, UA=, client CID=6b617a0cb81764c1, server CID=4000000b9ed2d9c2, downstream=[::ffff:172.18.0.3]:48386, [::]:4443=local, drain=none
relay-1        | E0215 00:31:42.674021     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7f60c4067870
relay-1        | V0215 00:31:42.674061     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7f60c4067870
relay-1        | V0215 00:31:42.674105     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7f60c4067870
relay-1        | V0215 00:31:42.674123     8 MoQSession.cpp:2124] ~MoQSession sess=0x7f60c4067870
relay-1        | V0215 00:31:42.675545     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0215 00:31:42.675704     8 MoQSession.cpp:2176] start sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.675837     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.675855     8 MoQSession.cpp:2548] controlReadLoop sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.675862     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7f60c40667f0
relay-1        | W0215 00:31:42.676025     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0215 00:31:42.676035     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0215 00:31:42.676045     8 MoQSession.cpp:2411] onClientSetup sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.676050     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.676055     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0215 00:31:42.676063     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
relay-1        | V0215 00:31:42.676410     8 MoQRelaySession.cpp:688] onPublishNamespace ns=moq-test/interop sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.676426     8 MoQRelay.cpp:79] publishNamespace ns=moq-test/interop
relay-1        | V0215 00:31:42.676432     8 MoQRelaySession.cpp:751] publishNamespaceOk reqID=0 sess=0x7f60c40667f0
relay-1        | V0215 00:31:42.979019     8 MoQServer.cpp:269] MoQServer WebTransport: supported protocols: moqt-16, moqt-15
relay-1        | V0215 00:31:42.979172     8 MoQSession.cpp:2176] start sess=0x7f60c406cf40
relay-1        | V0215 00:31:42.979404     8 MoQSession.cpp:5074] onNewBidiStream sess=0x7f60c406cf40
relay-1        | V0215 00:31:42.979424     8 MoQSession.cpp:2548] controlReadLoop sess=0x7f60c406cf40
relay-1        | V0215 00:31:42.979431     8 MoQSession.cpp:2267] controlWriteLoop sess=0x7f60c406cf40
relay-1        | W0215 00:31:42.979532     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086338, supported versions are: 4278190094,4278190095,4278190096
relay-1        | W0215 00:31:42.979545     8 MoQFramer.cpp:731] Peer advertised unsupported version 4279086337, supported versions are: 4278190094,4278190095,4278190096
relay-1        | V0215 00:31:42.979575     8 MoQSession.cpp:2411] onClientSetup sess=0x7f60c406cf40
relay-1        | V0215 00:31:42.979580     8 MoQSession.cpp:2419] Client MOQT_IMPLEMENTATION=moq-lite-rs sess=0x7f60c406cf40
relay-1        | V0215 00:31:42.979585     8 MoQServerBase.cpp:51] MoQServerBase::ClientSetup
relay-1        | V0215 00:31:42.979596     8 MoQSession.cpp:2477] Negotiated Version=0xff00000e (draft-14)
test-client-1  | not ok 5 - announce-subscribe
test-client-1  |   ---
test-client-1  |   duration_ms: 1807
test-client-1  |   message: "timeout waiting for announcement"
test-client-1  |   ...
test-client-1  | ok 6 - subscribe-before-announce # SKIP moq-lite API requires announcement before subscribe
relay-1        | E0215 00:31:44.481900     8 MoQServer.h:129] proxygen::HTTPException: Got error=ApplicationError: 91141958510811, Server closed by peer reason=dropped
relay-1        | V0215 00:31:44.481927     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.481932     8 MoQSession.cpp:2244] close sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.481941     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.481952     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7f60c406cf40
relay-1        | E20260215 00:31:44.481987     8 HQSession.cpp:530] Connection closed with error err=91141958510811 msg=Server closed by peer reason=dropped proto=h3, UA=, client CID=f34ae0d5562989f4, server CID=400000114d09f6bd, downstream=[::ffff:172.18.0.3]:48386, [::]:4443=local, drain=none
relay-1        | E0215 00:31:44.482112     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: received reset_stream with error=0 id=4 sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.482122     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.482156     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7f60c406cf40
relay-1        | V0215 00:31:44.482164     8 MoQSession.cpp:2124] ~MoQSession sess=0x7f60c406cf40
[Ktest-client-1 exited with code 1
[31m[1mAborting on container exit...[0m
 Container main-test-client-1  Stopping
 Container main-test-client-1  Stopped
 Container main-relay-1  Stopping
relay-1        | E0215 00:31:52.680433     8 MoQServer.h:129] proxygen::HTTPException: Got error=LocalError: Idle timeout, Idle timeout: 10 seconds timeout
relay-1        | V0215 00:31:52.680461     8 MoQSession.h:367] onSessionEnderr=4294967295 sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.680467     8 MoQSession.cpp:2244] close sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.680475     8 MoQRelay.cpp:231] publishNamespaceDone ns=moq-test/interop
relay-1        | V0215 00:31:52.680482     8 MoQRelay.cpp:224] Pruning empty subtree at: moq-test
relay-1        | V0215 00:31:52.680489     8 MoQSession.cpp:2164] requestCancellation from cleanup sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.680500     8 MoQSession.cpp:2260] requestCancellation from close sess=0x7f60c40667f0
relay-1        | E0215 00:31:52.680541     8 MoQSession.cpp:2573] proxygen::WebTransport::Exception: quic error with error=4294967295 id=4 sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.680579     8 MoQSession.cpp:2550] exit controlReadLoop sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.680640     8 MoQSession.cpp:2269] exit controlWriteLoop sess=0x7f60c40667f0
relay-1        | V0215 00:31:52.690819     8 MoQSession.cpp:2124] ~MoQSession sess=0x7f60c40667f0
 Container main-relay-1  Stopped
[Krelay-1 exited with code 137

make[1]: *** [Makefile:65: test] Error 1
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
