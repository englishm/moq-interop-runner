make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
Running tests against https://us-west-2.relay.quicr.org:33437/relay...
  Client: ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64
docker run --rm \
	--network host \
	-e RELAY_URL=https://us-west-2.relay.quicr.org:33437/relay \
	-e TLS_DISABLE_VERIFY=1 \
	ghcr.io/facebookexperimental/moxygen-interop-client:latest-amd64
TAP version 14
# moxygen interop test client
# Relay: https://us-west-2.relay.quicr.org:33437/relay
# Transport: WebTransport
1..6
W0215 00:40:21.845761     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
ok 1 - setup-only
  ---
  duration_ms: 357
  info: SETUP exchange completed successfully
  ...
E0215 00:40:21.932437     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be77e10
E20260215 00:40:22.072849     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=82517ef3142a3a25, local=10.1.0.174:45041, 35.95.73.240:33437=upstream, drain=done
W0215 00:40:22.255831     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:22.347794     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be8fe70
E0215 00:40:22.438336     1 MoQRelaySession.cpp:681] PublishNamespaceDone for unknown publishNamespace, sess=0x55d05be8fe70
ok 2 - announce-only
  ---
  duration_ms: 505
  info: PUBLISH_NAMESPACE completed successfully
  ...
E0215 00:40:22.438483     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be8fe70
E20260215 00:40:22.528968     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=9943bb9eb1e94f32, local=10.1.0.174:52042, 35.95.73.240:33437=upstream, drain=done
W0215 00:40:22.608611     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:22.692928     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be83e20
W0215 00:40:22.775834     1 MoQFramer.cpp:698] parseParams: ignoring param not allowed for frame type at param index=0, key=32
E0215 00:40:22.776031     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be83e20
not ok 3 - subscribe-error
  ---
  duration_ms: 337
  error: Subscribe succeeded (relay accepted non-existent track)
  ...
E20260215 00:40:22.859114     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=5d6500a9b173644b, local=10.1.0.174:46934, 35.95.73.240:33437=upstream, drain=done
W0215 00:40:22.942766     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:23.025484     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be938e0
W0215 00:40:23.388736     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:23.479770     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be8b0e0
W0215 00:40:23.569809     1 MoQFramer.cpp:698] parseParams: ignoring param not allowed for frame type at param index=0, key=32
E0215 00:40:23.570105     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be8b0e0
E0215 00:40:23.570129     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be938e0
ok 4 - announce-subscribe
  ---
  duration_ms: 793
  info: Publisher announced, subscriber subscribed successfully
  ...
E20260215 00:40:23.651448     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=56acc89607b9a07e, local=10.1.0.174:45436, 35.95.73.240:33437=upstream, drain=done
E20260215 00:40:23.659695     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=5a2860e5b13f8f6f, local=10.1.0.174:48199, 35.95.73.240:33437=upstream, drain=done
W0215 00:40:23.762173     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:23.857393     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be938c0
E0215 00:40:23.951737     1 MoQSession.cpp:2573] proxygen::WebTransport::Exception: session terminated with error=386759528 id=4 sess=0x55d05be938c0
ok 5 - publish-namespace-done
  ---
  duration_ms: 381
  info: PUBLISH_NAMESPACE_OK received, PUBLISH_NAMESPACE_DONE sent
  ...
E20260215 00:40:24.177316     1 HQSession.cpp:530] Connection closed with error err=100 msg=Client closed by peer reason= proto=h3, client CID=, server CID=991ffc763e99838a, local=10.1.0.174:39826, 35.95.73.240:33437=upstream, drain=done
W0215 00:40:24.341492     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:24.424090     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be58fe0
W0215 00:40:24.505346     1 MoQFramer.cpp:698] parseParams: ignoring param not allowed for frame type at param index=0, key=32
W0215 00:40:25.150486     1 MoQWebTransportClient.cpp:180] WebTransport: No WT-Protocol header in response, will use legacy version negotiation
W0215 00:40:25.233314     1 MoQSession.cpp:4518] Issuing request that will fail; nextRequestID_=0 peerMaxRequestID_=0 sess=0x55d05be9f4f0
malloc(): unsorted double linked list corrupted
*** Aborted at 1771116025 (Unix time, try 'date -d @1771116025') ***
*** Signal 6 (SIGABRT) (0x1) received by PID 1 (pthread TID 0x7f8a5935d300) (linux TID 1) (maybe from PID 1, UID 0) (code: sent by tkill or tgkill), stack trace: ***
    @ 00000000002b1e71 _ZN5folly10symbolizer12_GLOBAL__N_113signalHandlerEiP9siginfo_tPv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/debugging/symbolizer/SignalHandler.cpp:552
    @ 000000000004532f (unknown)
    @ 000000000009eb2c pthread_kill
    @ 000000000004527d gsignal
    @ 00000000000288fe abort
    @ 00000000000297b5 (unknown)
    @ 00000000000a8ff4 (unknown)
    @ 00000000000abd7b (unknown)
    @ 00000000000ad6f3 malloc
    @ 00000000000bb903 _Znwm
    @ 000000000020bb2c folly_coro_async_malloc
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/lang/New.h:49
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/coro/detail/Malloc.cpp
    @ 00000000000f8ce3 _ZN12_GLOBAL__N_115SimplePublisher9subscribeEN7moxygen16SubscribeRequestESt10shared_ptrINS1_13TrackConsumerEE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/Task.h:130
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClient.cpp
    @ 000000000013b599 _ZN7moxygen10MoQSession15handleSubscribeEPZNS0_15handleSubscribeENS_16SubscribeRequestESt10shared_ptrINS0_18TrackPublisherImplEEE110_ZN7moxygen10MoQSession15handleSubscribeENS_16SubscribeRequestESt10shared_ptrINS0_18TrackPublisherImplEE.Frame.actor
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp:3312
    @ 00000000002929c9 _ZN5folly36resumeCoroutineWithNewAsyncStackRootENSt7__n486116coroutine_handleIvEERNS_15AsyncStackFrameE
                       /usr/include/c++/13/coroutine:135
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/tracing/AsyncStack.cpp
    @ 0000000000159a13 _ZN5folly6detail8function5call_IZNS_4coro16TaskWithExecutorIvE7Awaiter13await_suspendINS3_6detail18InlineTaskDetached12promise_typeEEEvNSt7__n486116coroutine_handleIT_EEEUlvE_Lb1ELb0EvJEEET2_DpT3_RNS1_4DataE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/tracing/AsyncStack-inl.h:88
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp
    @ 000000000023fcfe _ZN5folly9EventBase20FunctionLoopCallback15runLoopCallbackEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/Function.h:370
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp
    @ 0000000000238b5d _ZN5folly9EventBase19runLoopCallbackListERN5boost9intrusive4listINS0_12LoopCallbackEJNS2_18constant_time_sizeILb0EEEEEERKNS0_21LoopCallbacksDeadlineE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:1028
    @ 0000000000238cdc _ZN5folly9EventBase16runLoopCallbacksEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:1049
    @ 000000000023aedf _ZN5folly9EventBase8loopMainEiNS0_11LoopOptionsE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:657
    @ 000000000023ba71 _ZN5folly9EventBase8loopBodyEiNS0_11LoopOptionsE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:539
    @ 00000000002433f0 _ZThn16_N5folly9EventBase5driveEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.h:925
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp
    @ 0000000000118258 _ZNO5folly4coro6detail16BlockingWaitTaskIRN7moxygen17InteropTestResultEE6getViaEPNS_16DrivableExecutorERNS_15AsyncStackFrameE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/BlockingWait.h:230
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp
    @ 0000000000113bb0 _ZNK5folly4coro16blocking_wait_fnclINS0_16TaskWithExecutorIN7moxygen17InteropTestResultEEELi0EEENS0_6detail22decay_rvalue_referenceINS0_12await_resultIDTclL_ZNS0_11folly_cpo__13co_viaIfAsyncEEclscPDoFNS_17ExecutorKeepAliveINS_8ExecutorEEEvELDnEEclscPDoFT_vELDnEEEEvE4typeEE4typeEOSG_PNS_16DrivableExecutorE.isra.0
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/BlockingWait.h:408
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp
    @ 00000000000f0a82 main
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp:200
    @ 000000000002a1c9 (unknown)
    @ 000000000002a28a __libc_start_main
    @ 00000000000f6d84 _start

*** Check failure async stack trace: ***
*** First async stack root: 0x7ffcf7498c50, normal stack frame pointer holding async stack root: 0x7ffcf7498c90, return address: 0x55d039177a14 ***
*** First async stack frame pointer: 0x55d05be01140, return address: 0x55d0392b09ca, async stack trace: ***
    @ 00000000001498c4 _ZN7moxygen10MoQSession11onSubscribeENS_16SubscribeRequestE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp:3262
    @ 00000000000f35d9 _ZN5follyL13detached_taskEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/tracing/AsyncStack.cpp:169
*** Aborted at 1771116025 (Unix time, try 'date -d @1771116025') ***
*** Signal 11 (SIGSEGV) (0x0) received by PID 1 (pthread TID 0x7f8a5935d300) (linux TID 1) (code: sent by kernel (SI_KERNEL)), stack trace: ***
    @ 00000000002b1e71 _ZN5folly10symbolizer12_GLOBAL__N_113signalHandlerEiP9siginfo_tPv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/debugging/symbolizer/SignalHandler.cpp:552
    @ 000000000004532f (unknown)
    @ 00000000000289a2 abort
    @ 00000000000297b5 (unknown)
    @ 00000000000a8ff4 (unknown)
    @ 00000000000abd7b (unknown)
    @ 00000000000ad6f3 malloc
    @ 00000000000bb903 _Znwm
    @ 000000000020bb2c folly_coro_async_malloc
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/lang/New.h:49
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/coro/detail/Malloc.cpp
    @ 00000000000f8ce3 _ZN12_GLOBAL__N_115SimplePublisher9subscribeEN7moxygen16SubscribeRequestESt10shared_ptrINS1_13TrackConsumerEE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/Task.h:130
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClient.cpp
    @ 000000000013b599 _ZN7moxygen10MoQSession15handleSubscribeEPZNS0_15handleSubscribeENS_16SubscribeRequestESt10shared_ptrINS0_18TrackPublisherImplEEE110_ZN7moxygen10MoQSession15handleSubscribeENS_16SubscribeRequestESt10shared_ptrINS0_18TrackPublisherImplEE.Frame.actor
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp:3312
    @ 00000000002929c9 _ZN5folly36resumeCoroutineWithNewAsyncStackRootENSt7__n486116coroutine_handleIvEERNS_15AsyncStackFrameE
                       /usr/include/c++/13/coroutine:135
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/tracing/AsyncStack.cpp
    @ 0000000000159a13 _ZN5folly6detail8function5call_IZNS_4coro16TaskWithExecutorIvE7Awaiter13await_suspendINS3_6detail18InlineTaskDetached12promise_typeEEEvNSt7__n486116coroutine_handleIT_EEEUlvE_Lb1ELb0EvJEEET2_DpT3_RNS1_4DataE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/tracing/AsyncStack-inl.h:88
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp
    @ 000000000023fcfe _ZN5folly9EventBase20FunctionLoopCallback15runLoopCallbackEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/Function.h:370
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp
    @ 0000000000238b5d _ZN5folly9EventBase19runLoopCallbackListERN5boost9intrusive4listINS0_12LoopCallbackEJNS2_18constant_time_sizeILb0EEEEEERKNS0_21LoopCallbacksDeadlineE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:1028
    @ 0000000000238cdc _ZN5folly9EventBase16runLoopCallbacksEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:1049
    @ 000000000023aedf _ZN5folly9EventBase8loopMainEiNS0_11LoopOptionsE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:657
    @ 000000000023ba71 _ZN5folly9EventBase8loopBodyEiNS0_11LoopOptionsE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp:539
    @ 00000000002433f0 _ZThn16_N5folly9EventBase5driveEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.h:925
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/io/async/EventBase.cpp
    @ 0000000000118258 _ZNO5folly4coro6detail16BlockingWaitTaskIRN7moxygen17InteropTestResultEE6getViaEPNS_16DrivableExecutorERNS_15AsyncStackFrameE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/BlockingWait.h:230
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp
    @ 0000000000113bb0 _ZNK5folly4coro16blocking_wait_fnclINS0_16TaskWithExecutorIN7moxygen17InteropTestResultEEELi0EEENS0_6detail22decay_rvalue_referenceINS0_12await_resultIDTclL_ZNS0_11folly_cpo__13co_viaIfAsyncEEclscPDoFNS_17ExecutorKeepAliveINS_8ExecutorEEEvELDnEEclscPDoFT_vELDnEEEEvE4typeEE4typeEOSG_PNS_16DrivableExecutorE.isra.0
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/installed/folly/include/folly/coro/BlockingWait.h:408
                       -> /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp
    @ 00000000000f0a82 main
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/moqtest/interop/MoQInteropClientMain.cpp:200
    @ 000000000002a1c9 (unknown)
    @ 000000000002a28a __libc_start_main
    @ 00000000000f6d84 _start

*** Check failure async stack trace: ***
*** First async stack root: 0x7ffcf7498c50, normal stack frame pointer holding async stack root: 0x7ffcf7498c90, return address: 0x55d039177a14 ***
*** First async stack frame pointer: 0x55d05be01140, return address: 0x55d0392b09ca, async stack trace: ***
    @ 00000000001498c4 _ZN7moxygen10MoQSession11onSubscribeENS_16SubscribeRequestE
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebookexperimental-moxygen.git/moxygen/MoQSession.cpp:3262
    @ 00000000000f35d9 _ZN5follyL13detached_taskEv
                       /tmp/fbcode_builder_getdeps-ZappZbuildZfbcode_builder-root/repos/github.com-facebook-folly.git/folly/tracing/AsyncStack.cpp:169
make[1]: *** [Makefile:91: test-external] Error 139
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
