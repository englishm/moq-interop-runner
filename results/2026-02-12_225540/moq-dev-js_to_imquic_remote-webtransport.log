make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
Running tests against https://lminiero.it:9000...
  Client: ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
docker run --rm \
	--network host \
	-e RELAY_URL=https://lminiero.it:9000 \
	-e TLS_DISABLE_VERIFY=false \
	ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
TAP version 14
# moq-dev-js-client v0.1.0
# Relay: https://lminiero.it:9000
1..6
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
ok 1 - setup-only
  ---
  duration_ms: 757
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
ok 2 - announce-only
  ---
  duration_ms: 1142
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceError {
  requestId: 0n,
  errorCode: 0,
  reasonPhrase: "Namespace already published",
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
ok 3 - publish-namespace-done
  ---
  duration_ms: 1347
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
subscribe start: id=0 broadcast=nonexistent/namespace track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "nonexistent/namespace",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeError {
  requestId: 0n,
  errorCode: 4,
  reasonPhrase: "Namespace not found",
  encode: [AsyncFunction: encode],
}
subscribe error: id=0 broadcast=nonexistent/namespace track=test-track error=SUBSCRIBE_ERROR: code=4 reason=Namespace not found
ok 4 - subscribe-error
  ---
  duration_ms: 750
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceError {
  requestId: 0n,
  errorCode: 0,
  reasonPhrase: "Namespace already published",
  encode: [AsyncFunction: encode],
}
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read Subscribe {
  requestId: 1n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message write SubscribeOk {
  requestId: 1n,
  trackAlias: 1n,
  encode: [AsyncFunction: encode],
}
publish ok: broadcast=moq-test/interop track=test-track
message read SubscribeOk {
  requestId: 0n,
  trackAlias: 0n,
  encode: [AsyncFunction: encode],
}
subscribe ok: id=0 broadcast=moq-test/interop track=test-track
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
not ok 5 - announce-subscribe
  ---
  duration_ms: 3001
  message: "timeout after 3000ms: announce-subscribe"
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeOk {
  requestId: 0n,
  trackAlias: 0n,
  encode: [AsyncFunction: encode],
}
subscribe ok: id=0 broadcast=moq-test/interop track=test-track
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://lminiero.it:9000/ no WebTransport after 200ms, attempting WebSocket fallback
https://lminiero.it:9000/ sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map(1) {
      7n: Uint8Array(18) [ 105, 109, 113, 117, 105, 99, 32, 48, 46, 48, 46, 49, 47, 97, 108, 112, 104, 97 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://lminiero.it:9000/ moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceError {
  requestId: 0n,
  errorCode: 0,
  reasonPhrase: "Namespace already published",
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
not ok 6 - subscribe-before-announce
  ---
  duration_ms: 3501
  message: "timeout after 3500ms: subscribe-before-announce"
  ...
============================================================
Bun v1.3.9 (cf6cdbbb) Linux x64 (baseline)
Linux Kernel v6.14.0 | glibc v2.41
CPU: sse42 popcnt avx avx2
Args: "bun" "run" "/app/src/main.ts" "--relay" "https://lminiero.it:9000"
Features: Bun.stderr(2) Bun.stdin(2) Bun.stdout(2) WebSocket(8) jsc tsconfig(3) process_dlopen 
Builtins: "bun:main" "node:console" "node:crypto" "node:dns/promises" "node:fs" "node:module" "node:net" "node:path" "node:process" "node:stream/web" "node:timers" "node:tls" "node:tty" "node:url" "node:util" "node:http2" "node:dgram" 
Elapsed: 10615ms | User: 377ms | Sys: 110ms
RSS: 0.95GB | Peak: 82.78MB | Commit: 0.95GB | Faults: 0 | Machine: 16.77GB

panic(main thread): Segmentation fault at address 0x0
oh no: Bun has crashed. This indicates a bug in Bun, not your code.

To send a redacted crash report to Bun's team,
please file a GitHub issue using the link below:

 https://bun.report/1.3.9/Br1cf6cdbbgiE+gggC42qhwE+++PA2AA

make[1]: *** [Makefile:91: test-external] Error 132
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
