make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
rm -rf mlog/
mkdir -p mlog/relay mlog/client
Running interop tests...
  Relay:  moq-dev-rs-interop:latest
  Client: ghcr.io/englishm/moq-interop-runner-moq-test-client:latest
RELAY_IMAGE=moq-dev-rs-interop:latest CLIENT_IMAGE=ghcr.io/englishm/moq-interop-runner-moq-test-client:latest \
	docker compose -f docker-compose.test.yml up --abort-on-container-exit
time="2026-02-12T01:16:17Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-12T01:16:17Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-12T01:16:17Z" level=warning msg="The \"PORT\" variable is not set. Defaulting to a blank string."
time="2026-02-12T01:16:17Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
time="2026-02-12T01:16:17Z" level=warning msg="The \"HEX\" variable is not set. Defaulting to a blank string."
 Container main-relay-1  Recreate
 Container main-relay-1  Recreated
Attaching to relay-1, test-client-1
relay-1        | client: ClientConfig { bind: [::]:0, tls: ClientTls { root: [], disable_verify: None }, websocket: ClientWebSocket { enabled: true, delay: Some(200ms) } }
relay-1        | [2m2026-02-12T01:16:17.660558Z[0m [32m INFO[0m [2mmoq_relay::cluster[0m[2m:[0m running as root, accepting leaf nodes
relay-1        | [2m2026-02-12T01:16:17.660558Z[0m [32m INFO[0m [2mmoq_relay[0m[2m:[0m listening [3maddr[0m[2m=[0m[::]:4443
test-client-1  | TAP version 14
test-client-1  | # moq-test-client v0.1.0
test-client-1  | # Relay: https://relay:4443/
test-client-1  | 1..6
relay-1        | [2m2026-02-12T01:16:23.313611Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m0[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
test-client-1  | ok 1 - setup-only
test-client-1  |   ---
test-client-1  |   duration_ms: 47
test-client-1  |   connection_id: b1016bac2c3a7e460cf3b2e397c62e52
relay-1        | [2m2026-02-12T01:16:23.314288Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed by peer: 0
test-client-1  |   ...
relay-1        | [2m2026-02-12T01:16:23.314326Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m0[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:23.321186Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m1[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
test-client-1  | ok 2 - announce-only
test-client-1  |   ---
test-client-1  |   duration_ms: 2008
test-client-1  |   connection_id: b097c1b886945db7935e2acb5e79b710
test-client-1  |   ...
relay-1        | [2m2026-02-12T01:16:25.322815Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m1[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:25.322891Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed
relay-1        | [2m2026-02-12T01:16:25.329758Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m2[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
relay-1        | [2m2026-02-12T01:16:25.330240Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m2[1m}[0m[2m:[0m [2mmoq_lite::ietf::publisher[0m[2m:[0m subscribed started [3mid[0m[2m=[0m0 [3mbroadcast[0m[2m=[0mnonexistent/namespace [3mtrack[0m[2m=[0mtest-track
test-client-1  | ok 3 - subscribe-error
test-client-1  |   ---
test-client-1  |   duration_ms: 7
test-client-1  |   connection_id: cb4d78576f3d760cef70dcff026660a7
relay-1        | [2m2026-02-12T01:16:25.330480Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed by peer: 0
test-client-1  |   ...
relay-1        | [2m2026-02-12T01:16:25.330517Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m2[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:25.337400Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m3[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
relay-1        | [2m2026-02-12T01:16:25.344660Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m4[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
relay-1        | [2m2026-02-12T01:16:25.345215Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m4[1m}[0m[2m:[0m [2mmoq_lite::ietf::publisher[0m[2m:[0m subscribed started [3mid[0m[2m=[0m0 [3mbroadcast[0m[2m=[0mmoq-test/interop [3mtrack[0m[2m=[0mtest-track
test-client-1  | ok 4 - announce-subscribe
relay-1        | [2m2026-02-12T01:16:25.345559Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed by peer: 0
test-client-1  |   ---
test-client-1  |   duration_ms: 15
test-client-1  |   publisher_connection_id: 6ebcf0a3a886335bc321abb7946d8179
test-client-1  |   subscriber_connection_id: 6061d4fd09b397ba921c775ec7df2bf0
test-client-1  |   ...
relay-1        | [2m2026-02-12T01:16:25.345626Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m3[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:25.345646Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed
relay-1        | [2m2026-02-12T01:16:25.345681Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m4[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:25.352919Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m5[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
relay-1        | [2m2026-02-12T01:16:25.353405Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m5[1m}[0m[2m:[0m [2mmoq_lite::ietf::publisher[0m[2m:[0m subscribed started [3mid[0m[2m=[0m0 [3mbroadcast[0m[2m=[0mmoq-test/interop [3mtrack[0m[2m=[0mtest-track
relay-1        | [2m2026-02-12T01:16:25.353592Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed by peer: 0
relay-1        | [2m2026-02-12T01:16:25.353631Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m5[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:25.865651Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m6[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
test-client-1  | ok 5 - subscribe-before-announce
test-client-1  |   ---
test-client-1  |   duration_ms: 3521
test-client-1  |   subscriber_connection_id: e13e14ca6c25e1e18babbce3d0a57bec
test-client-1  |   publisher_connection_id: a21f00eb56c66d365c1a33154fca66f3
test-client-1  |   ...
relay-1        | [2m2026-02-12T01:16:28.866832Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m6[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session terminated
relay-1        | [2m2026-02-12T01:16:28.866951Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed
relay-1        | [2m2026-02-12T01:16:28.875157Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m7[1m}[0m[2m:[0m [2mmoq_relay::connection[0m[2m:[0m session accepted [3mroot[0m[2m=[0m [3mpublish[0m[2m=[0m [3msubscribe[0m[2m=[0m
relay-1        | [2m2026-02-12T01:16:30.877502Z[0m [32m INFO[0m [1mconn[0m[1m{[0m[3mid[0m[2m=[0m7[1m}[0m[2m:[0m [2mmoq_lite::ietf::session[0m[2m:[0m session closed
relay-1        | [2m2026-02-12T01:16:30.877636Z[0m [33m WARN[0m [2mmoq_relay[0m[2m:[0m connection closed [3merr[0m[2m=[0mtransport error: connection error: closed
test-client-1  | ok 6 - publish-namespace-done
test-client-1  |   ---
test-client-1  |   duration_ms: 2112
test-client-1  |   connection_id: 8c9b92802269a60c9a55851a8428ea40
test-client-1  |   ...
[Ktest-client-1 exited with code 0
Aborting on container exit...
 Container main-test-client-1  Stopping
 Container main-test-client-1  Stopped
 Container main-relay-1  Stopping
 Container main-relay-1  Stopped

Test results in mlog/
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
