make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
Running tests against https://draft-14.cloudflare.mediaoverquic.com:443/moq...
  Client: ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
docker run --rm \
	--network host \
	-e RELAY_URL=https://draft-14.cloudflare.mediaoverquic.com:443/moq \
	-e TLS_DISABLE_VERIFY=false \
	ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
TAP version 14
# moq-dev-js-client v0.1.0
# Relay: https://draft-14.cloudflare.mediaoverquic.com:443/moq
1..6
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
ok 1 - setup-only
  ---
  duration_ms: 267
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
ok 2 - announce-only
  ---
  duration_ms: 734
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 3 - publish-namespace-done
  ---
  duration_ms: 924
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=nonexistent/namespace track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "nonexistent/namespace",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeError {
  requestId: 0n,
  errorCode: 4,
  reasonPhrase: "not found: Track not found [error:9447271a-2299-4c13-92f9-cd7a78f5fba7]",
  encode: [AsyncFunction: encode],
}
subscribe error: id=0 broadcast=nonexistent/namespace track=test-track error=SUBSCRIBE_ERROR: code=4 reason=not found: Track not found [error:9447271a-2299-4c13-92f9-cd7a78f5fba7]
ok 4 - subscribe-error
  ---
  duration_ms: 338
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeOk {
  requestId: 0n,
  trackAlias: 0n,
  encode: [AsyncFunction: encode],
}
subscribe ok: id=0 broadcast=moq-test/interop track=test-track
message read PublishDone {
  requestId: 0n,
  statusCode: 4,
  reasonPhrase: "closed, code=4",
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 5 - announce-subscribe
  ---
  duration_ms: 2257
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeError {
  requestId: 0n,
  errorCode: 4,
  reasonPhrase: "not found: Track not found [error:a17b8b8f-63fa-46c5-941c-4fa804221bbf]",
  encode: [AsyncFunction: encode],
}
subscribe error: id=0 broadcast=moq-test/interop track=test-track error=SUBSCRIBE_ERROR: code=4 reason=not found: Track not found [error:a17b8b8f-63fa-46c5-941c-4fa804221bbf]
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 6 - subscribe-before-announce
  ---
  duration_ms: 933
  ...
============================================================
Bun v1.3.9 (cf6cdbbb) Linux x64 (baseline)
Linux Kernel v6.11.0 | glibc v2.41
CPU: sse42 popcnt avx avx2 avx512
Args: "bun" "run" "/app/src/main.ts" "--relay" "https://draft-14.cloudflare.mediaoverquic.com:443/moq"
Features: Bun.stderr(2) Bun.stdin(2) Bun.stdout(2) jsc tsconfig(3) process_dlopen 
Builtins: "bun:main" "node:console" "node:crypto" "node:dns/promises" "node:fs" "node:module" "node:net" "node:path" "node:process" "node:stream/web" "node:timers" "node:tls" "node:tty" "node:url" "node:util" "node:http2" "node:dgram" 
Elapsed: 5563ms | User: 336ms | Sys: 75ms
RSS: 1.05GB | Peak: 80.56MB | Commit: 1.05GB | Faults: 53 | Machine: 16.77GB

panic(main thread): Segmentation fault at address 0x20EA64B1
oh no: Bun has crashed. This indicates a bug in Bun, not your code.

To send a redacted crash report to Bun's team,
please file a GitHub issue using the link below:

 https://bun.report/1.3.9/Br1cf6cdbbgiEugggC42qhwEA2Airyp9gB

make[1]: *** [Makefile:91: test-external] Error 132
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
