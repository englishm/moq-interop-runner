make[1]: Entering directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
Running tests against https://draft-14.cloudflare.mediaoverquic.com:443/moq...
  Client: ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
docker run --rm \
	--network host \
	-e RELAY_URL=https://draft-14.cloudflare.mediaoverquic.com:443/moq \
	-e TLS_DISABLE_VERIFY=false \
	ghcr.io/englishm/moq-interop-runner-moq-dev-js-client:latest
TAP version 14
# moq-dev-js-client v0.1.0
# Relay: https://draft-14.cloudflare.mediaoverquic.com:443/moq
1..6
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
ok 1 - setup-only
  ---
  duration_ms: 231
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
ok 2 - announce-only
  ---
  duration_ms: 718
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 3 - publish-namespace-done
  ---
  duration_ms: 915
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=nonexistent/namespace track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "nonexistent/namespace",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeError {
  requestId: 0n,
  errorCode: 4,
  reasonPhrase: "not found: Track not found [error:89afd58d-f810-4c54-8c50-aaa3b38f53c7]",
  encode: [AsyncFunction: encode],
}
subscribe error: id=0 broadcast=nonexistent/namespace track=test-track error=SUBSCRIBE_ERROR: code=4 reason=not found: Track not found [error:89afd58d-f810-4c54-8c50-aaa3b38f53c7]
ok 4 - subscribe-error
  ---
  duration_ms: 309
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
message read SubscribeOk {
  requestId: 0n,
  trackAlias: 0n,
  encode: [AsyncFunction: encode],
}
subscribe ok: id=0 broadcast=moq-test/interop track=test-track
message read Subscribe {
  requestId: 1n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 127,
  encode: [AsyncFunction: encode],
}
message write SubscribeOk {
  requestId: 1n,
  trackAlias: 1n,
  encode: [AsyncFunction: encode],
}
publish ok: broadcast=moq-test/interop track=test-track
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read Unsubscribe {
  requestId: 1n,
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 5 - announce-subscribe
  ---
  duration_ms: 2357
  ...
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
subscribe start: id=0 broadcast=moq-test/interop track=test-track
message write Subscribe {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  trackName: "test-track",
  subscriberPriority: 0,
  encode: [AsyncFunction: encode],
}
publish done: broadcast=moq-test/interop track=test-track
message write PublishDone {
  requestId: 1n,
  statusCode: 200,
  reasonPhrase: "OK",
  encode: [AsyncFunction: encode],
}
message read PublishDone {
  requestId: 0n,
  statusCode: 200,
  reasonPhrase: "closed, code=200",
  encode: [AsyncFunction: encode],
}
message read SubscribeOk {
  requestId: 0n,
  trackAlias: 0n,
  encode: [AsyncFunction: encode],
}
subscribe ok: id=0 broadcast=moq-test/interop track=test-track
message read PublishDone {
  requestId: 0n,
  statusCode: 4,
  reasonPhrase: "closed, code=4",
  encode: [AsyncFunction: encode],
}
Non serverCertificateHashes certificate verification is an experimental feature for webtransport node client and not covered by tests and thus may be broken (DO NOT USE IN PRODUCTION)
https://draft-14.cloudflare.mediaoverquic.com/moq sending client setup ClientSetup {
  versions: [ 4279086338, 4279086337, 4278190094 ],
  parameters: Parameters {
    vars: Map(1) {
      2n: 42069n,
    },
    bytes: Map(1) {
      7n: Uint8Array(11) [ 109, 111, 113, 45, 108, 105, 116, 101, 45, 106, 115 ],
    },
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq received server setup ServerSetup {
  version: 4278190094,
  parameters: Parameters {
    vars: Map(1) {
      2n: 100n,
    },
    bytes: Map {},
    size: [Getter],
    setBytes: [Function: setBytes],
    setVarint: [Function: setVarint],
    getBytes: [Function: getBytes],
    getVarint: [Function: getVarint],
    removeBytes: [Function: removeBytes],
    removeVarint: [Function: removeVarint],
    encode: [AsyncFunction: encode],
  },
  encode: [AsyncFunction: encode],
}
https://draft-14.cloudflare.mediaoverquic.com/moq moq-ietf session established
message write PublishNamespace {
  requestId: 0n,
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceOk {
  requestId: 0n,
  encode: [AsyncFunction: encode],
}
message write PublishNamespaceDone {
  trackNamespace: "moq-test/interop",
  encode: [AsyncFunction: encode],
}
message read PublishNamespaceCancel {
  trackNamespace: "moq-test/interop",
  errorCode: 0,
  reasonPhrase: "done",
  encode: [AsyncFunction: encode],
}
ok 6 - subscribe-before-announce
  ---
  duration_ms: 2946
  ...
============================================================
Bun v1.3.9 (cf6cdbbb) Linux x64 (baseline)
Linux Kernel v6.14.0 | glibc v2.41
CPU: sse42 popcnt avx avx2
Args: "bun" "run" "/app/src/main.ts" "--relay" "https://draft-14.cloudflare.mediaoverquic.com:443/moq"
Features: Bun.stderr(2) Bun.stdin(2) Bun.stdout(2) jsc tsconfig(3) process_dlopen 
Builtins: "bun:main" "node:console" "node:crypto" "node:dns/promises" "node:fs" "node:module" "node:net" "node:path" "node:process" "node:stream/web" "node:timers" "node:tls" "node:tty" "node:url" "node:util" "node:http2" "node:dgram" 
Elapsed: 7594ms | User: 344ms | Sys: 118ms
RSS: 1.07GB | Peak: 80.24MB | Commit: 1.07GB | Faults: 4 | Machine: 16.77GB

panic(main thread): Segmentation fault at address 0x0
oh no: Bun has crashed. This indicates a bug in Bun, not your code.

To send a redacted crash report to Bun's team,
please file a GitHub issue using the link below:

 https://bun.report/1.3.9/Br1cf6cdbbgiEugggC42qhwE+++PA2AA

make[1]: *** [Makefile:91: test-external] Error 132
make[1]: Leaving directory '/home/runner/work/moq-interop-runner/moq-interop-runner/main'
